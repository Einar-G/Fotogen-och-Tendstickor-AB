YUI.add("flickr-galleries-getInfo-fetcher",function(e,r){"use strict";e.namespace("ModelFetchers")["flickr-galleries-getInfo"]={run:function(o,t){var n=this,s=this._processParams(o);return e.FlickrPromise({apiResponse:t.callAPI("flickr.galleries.getInfo",s),galleryInfoModelRegistry:t.getModelRegistry("gallery-info-models"),personModelRegistry:t.getModelRegistry("person-models")}).then(function(e){return n._processResponse(e,o,t)},e.FetcherErrorLogger(r))},_processResponse:function(e,r,o){var t,n,s=e.apiResponse,i=e.galleryInfoModelRegistry,a=(e.personModelRegistry,e.personModel,s.gallery);if(a)return o.getModel("person-models",a.owner).then(function(e){return n=e,t={id:r.id,compoundId:a.id,owner:n,username:a.username,primaryPhotoId:a.primary_photo_id,dateCreate:parseInt(a.date_create),dateUpdate:parseInt(a.date_update),photoCount:a.count_photos,videoCount:a.count_videos,viewCount:parseInt(a.count_views),commentCount:parseInt(a.count_comments),title:a.title._content,description:a.description._content,currentState:a.current_state,primary_photo_server:a.primary_photo_server,primary_photo_farm:a.primary_photo_farm,primary_photo_secret:a.primary_photo_secret},i.addOrUpdate(t)})},_processParams:function(e){return{gallery_id:e.id}}}},"@VERSION@",{requires:["flickr-promise","api-helper","url-helper"],optional:["gallery-info-models","person-models"]});YUI.add("notifications-view",function(t,i){require("hermes-core/flog")(i);t.namespace("Views")[this.name]=t.Base.create("notifications-view",t.FlickrView,[],{langBundles:this.details.langBundles,registries:{person:"person-models",photo:"photo-models",group:"group-info-models",gallery:"gallery-models"},initializer:function(t){var i=this.appContext.getViewer();return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.nsid=i&&i.signedIn?i.nsid:void 0,t.nsid=this.nsid,this.pageNum=0,this.pageSize=30,this.isFetchingNotifs=!1,this.scrollBottomLoadDist=300,this.endOfNotifs=!1,this.shouldFetchNotifs=t.shouldFetchNotifs,this.height=t.height,this.width=t.width,this.listHeight=t.listHeight,this.overflowX=t.overflowX,this.overflowY=t.overflowY,this.notifFilter=t.notifFilter,this},loadState:function(){return this},buildContainer:function(){return this.setContainerWithTemplate("notifications",{notifications:[],height:this.height,width:this.width,listHeight:this.listHeight,overflowX:this.overflowX,overflowY:this.overflowY}),this},activate:function(){var t,i,e,o,n=this;return n.scrollContainer=n.get("container").one(".notifications-list"),n.scrollContainerElement=this.scrollContainer.getDOMNode(),this.registerEventHandler(n.scrollContainer.on("scroll",n.handleScrollNotifications.bind(n))),n.get("personNotificationsModels")?n.getMoreNotifications():(t=this.appContext.getViewer(),this.appContext.getModel("person-notifications-models",t.nsid).then(function(t){n.set("personNotificationsModels",t),i=t.getValue("notifications").size(),e=t.getValue("unseenNotificationCount"),n.shouldFetchNotifs&&0!==e||0===i||t.getValue("muteChanged")?(n.shouldFetchNotifs=!1,t.setValue("unseenNotificationCount",0),t.setValue("muteChanged",!1),n.get("container").one(".notifications-list").addClass("loading"),n.getMoreNotifications()):(o=t.getValue("notifications").getList(),n.pageNum=Math.floor(i/n.pageSize),n.appendPage(o))})),this},handleScrollNotifications:function(t){this.isFetchingNotifs||this.scrollContainerElement.offsetHeight+this.scrollContainerElement.scrollTop+this.scrollBottomLoadDist>=this.scrollContainerElement.scrollHeight&&this.getMoreNotifications()},getMoreNotifications:function(){this.endOfNotifs||(this.isFetchingNotifs=!0,this.showBalls(this.get("container").one(".notifications-list")),this.retrieveNotifsPage())},appendPage:function(i){var e=this;i.forEach(function(i){var o=i.toJSON();o.appContext=e.appContext,o.notifModel=e.get("personNotificationsModels"),o.events&&0!==o.events.length&&new t.Views["notification-view"](o).initialize(o).then(function(n){var s=t.Node.create('<li class="notification-list-item"></li>');e.get("container").one(".notifications-list").append(s),o.seen||s.addClass("unseen"),s.setHTML(n.get("container")),i.setValue("seen",!0),n.activate()})})},showBalls:function(i){this.balls||(this.balls=t.Node.create('<li class="loading-balls"></li>'),this.balls.setHTML(this.templates("flickr-balls")({}))),(i||this.get("container")).append(this.balls)},hideBalls:function(){this.balls&&this.balls.remove()},retrieveNotifsPage:function(){var t=this,i=t.get("personNotificationsModels");return i.getValue("notifications").getPage({page:t.pageNum+1,apiParams:{filter:t.notifFilter}}).then(function(e){return 0!==e.length?(t.pageNum++,t.set("personNotifications",i.getValue("notifications")),t.appendPage(e)):(0===t.pageNum&&t.get("container").one(".notifications-empty-state").removeClass("hidden"),t.endOfNotifs=!0),t.get("container").one(".notifications-list").removeClass("loading"),t.hideBalls(),t.isFetchingNotifs=!1,t},function(t){}).then(function(t){t.registerEventHandler(t.get("container").all("a").on("focus",function(i){var e=i.target.ancestor("li");e&&t.findFocus.call(this,e)}.bind(t)))})},findFocus:function(t){var i,e=t.one("a.photo");e?e.focus():(i=t.one("a:first-child"))&&i.focus()}})},"@VERSION@",{requires:["flickr-view","hermes-template-notifications"],langBundles:["common","notifications"],optional:["person-notifications-models","notification-view","photo-models","group-info-models","person-models","gallery-models"]});YUI.add("hermes-template-notifications-panel",function(t,a){var n=t.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(t,a,n,e,s){var i=null!=a?a:{},l=n.helperMissing,o=t.escapeExpression;return'<div class="notifications-panel">\n\t<div class="nav-container">\n\t\t<div class="tabs">\n\t\t\t<span role="button" class="tab selected" data-tab-id="main">'+o((n.intlMessage||a&&a.intlMessage||l).call(i,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:s}))+'</span>\n\t\t\t<span role="button" class="tab" data-tab-id="admin">TMP Groups You Admin</span>\n\t\t</div>\n\t\t<div class="actions">\n\t\t\t<a class="action settings-link" href="/account/email">\n\t\t\t\t<svg class="icon"><use xlink:href="#icon-settings"></use></svg>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\t<div class="list-container">\n\t\t'+o((n.outlet||a&&a.outlet||l).call(i,null!=a?a["notifications-list-view"]:a,{name:"outlet",hash:{},data:s}))+'\n\t</div>\n\t<a class="foot-link" href="/">\n\t\tTMP View all notifications\n\t</a>\n</div>\n'},useData:!0}),e={};t.Array.each([],function(a){var n=t.Template.get("hermes/"+a);n&&(e[a]=n)}),t.Template.register("hermes/notifications-panel",function(a,s){return s=s||{},s.partials=s.partials?t.merge(e,s.partials):e,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("template-lib-helper",function(e,t){var r=require("hermes-core/flog")(t);e.TemplateLibraryHelper=function(t,l){var n=l&&l.localizeLib?l.localizeLib:e.mix({langBundles:["common"]},e.Localizable),i={getTemplate:function(l,i){var o,a=e.Template.get("hermes/"+l),p=n.getLangBundles();if(p.locales=t.lang||n.defaultLang,"function"!=typeof a)throw r.error("Template not found",{topic:this.name,template:l}),new Error("Template not found: "+l);return t.flipper&&(o=t.flipper),function(e){return!(e=e||{}).flippers&&o&&(e.flippers=o.toJSON()),i&&(e.isMobile=i.isMobile,e.cspNonce=i.cspNonce),a(e,{data:{intl:p,flippers:e.flippers}})}}};return e.augment(i,e.EventTarget),i}},"@VERSION@",{requires:["event-custom"]});YUI.add("group-status-helper",function(e,t){require("hermes-core/flog")(t);var n=e.mix({langBundles:["common","groups"]},e.Localizable);e.GroupStatusHelper=function(t,o){var i,s,a=o.groupId,r=new e.TemplateLibraryHelper(t),u={load:function(){var n=this;return e.on("groupStatusHelper:groupStatusChanged",function(e){e.groupId===a&&n.update()}),o.useSearchModel?t.getModel("search-group-models",a).then(function(e){s=e,n.convertGroupInfoModel(e),n.groupRemoteMethods={join:e.registry.remote.join,leave:e.registry.remote.leave}}):t.getModel("group-info-models",a).then(function(e){return s=e,n.convertGroupInfoModel(e),n.groupRemoteMethods={join:e.registry.remote.join,leave:e.registry.remote.leave},e})},initiateJoinGroup:function(){var o=this.getJoinStatus(),s=i.title,a=i.id;if(o.canJoin&&!o.signedIn)return this.signInAndRedirectToGroup(a);if(o.canJoin&&!o.requiresRequest)return this.joinGroup(a);if(o.canJoin&&o.isInvited)return this.joinGroup(a);if(!o.hasJoined&&o.hasRequested&&o.requiresRequest){new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.GROUP_INVITE_ONLY_HEADER",groupName:s}),message:n.intlMessage({intlName:"groups.GROUP_INVITE_PENDING",groupName:s}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()}else{if(!o.hasJoined&&!o.hasRequested&&o.requiresRequest)return this.promptForRules().then(e.bind(function(){this.showInviteRequestModal.call(this,a)},this),e.bind(function(){},this));if(o.hasJoined)return e.Promise.resolve()}},initiateLeaveGroup:function(){this.showLeaveGroupModal()},showLeaveGroupModal:function(){var o=i.title,s=i.id,a=null,r="";1===i.memberCount&&i.isMember?r=n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_LAST_MEMBER",title:o}):i.isAdmin?(r=n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_ADMIN",title:o}),r+=n.intlHTMLMessage({intlName:"groups.GROUPS_LEAVE_WARNING_REMOVE_PHOTOS"})):(r=n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING",title:o}),r+=n.intlHTMLMessage({intlName:"groups.GROUPS_LEAVE_WARNING_REMOVE_PHOTOS"})),(a=new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_TITLE",title:o}),htmlMessage:r,actionButtonLabel:n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_LEAVE_BUTTON"}),cancelButtonLabel:n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_CANCEL_BUTTON"}),overlayClassList:"over-droparound-under-modal"})).on("actionClick",e.bind(function(){var e=a.get("container").one("input"),t=e&&e.getDOMNode().checked;this.leaveGroup(s,t)},this)),a.show()},joinGroup:function(){var o=this;return this.promptForRules().then(e.bind(function(){return this.groupRemoteMethods.join({groupModel:s,acceptRules:!0},t).then(function(t){return o.convertGroupInfoModel(t),o.fire("groupJoined"),e.fire("groupStatusHelper:groupJoined",{groupId:a}),e.fire("groupStatusHelper:groupStatusChanged",{groupId:a}),t},function(o){new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"common.OOPS"}),message:n.intlMessage({intlName:"groups.GROUP_JOIN_ERROR"}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()})},this),e.bind(function(e){},this))},leaveGroup:function(o,i){var a=this;this.groupRemoteMethods.leave({groupModel:s,deletePhotos:!!i},t).then(function(t){return a.convertGroupInfoModel(t),a.fire("groupLeft"),e.fire("groupStatusHelper:groupLeft",{groupId:o}),e.fire("groupStatusHelper:groupStatusChanged",{groupId:o}),t},function(o){new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"common.OOPS"}),message:n.intlMessage({intlName:"groups.GROUP_LEAVE_ERROR"}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()})},signInAndRedirectToGroup:function(o){var s,a=this,r=e.url("/groups/")+o,u=n.intlMessage({intlName:"groups.SIGN_IN_BEFORE_JOIN_MESSAGE",name:i.title}),l=n.intlMessage({intlName:"groups.SIGN_IN_AND_JOIN"}),g=n.intlMessage({intlName:"common.CANCEL"});if(this.signedOutTest)return this.showSignUpModal(o);(s=new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.SIGN_IN_BEFORE_JOIN_TITLE"}),htmlMessage:u,actionButtonLabel:l,cancelButtonLabel:g})).on("actionClick",function(){e.rapidTracker.beacon(a.name,"joinModalSigninClick"),e.SigninHelper.addPendingJoinGroup({id:o},{postLoginUrl:r})}),s.on("cancelClick",function(t){e.rapidTracker.beacon(a.name,"joinModalCancelClick")}),s.show()},showSignUpModal:function(o){var s,a=e.url("/groups/")+o,r=n.intlMessage({intlName:"groups.SIGN_IN_BEFORE_JOIN_TITLE"}),u=n.intlMessage({intlName:"groups.SIGN_UP_AND_JOIN_MESSAGE",name:i.title});(s=new e.Views.SignUpModal({appContext:t,signUpHeaderClass:"avatar group big",signUpHeaderImage:void 0!==this.groupModel.getValue("group")?this.groupModel.getValue("group").getValue("bestIconURL"):this.groupModel.getValue("bestIconURL"),signUpTitle:r,signUpMessage:u,beaconPrefix:"join"})).on("signUpClick",function(t){e.SigninHelper.signUpPendingJoinGroup({id:o},{postLoginUrl:a})}),s.on("signInClick",function(t){e.SigninHelper.addPendingJoinGroup({id:o},{postLoginUrl:a})}),s.show()},promptForRules:function(){return new e.Promise(e.bind(function(o,s){var a=i.secureRules,r=null;a?((r=new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.GROUP_JOIN_RULES_DIALOG_TITLE"}),htmlMessage:n.intlMessage({intlName:"groups.GROUP_JOIN_RULES_DIALOG_MESSAGE"})+"<br /><pre>"+a+"</pre>",showBodyLines:!1,actionButtonLabel:n.intlMessage({intlName:"groups.GROUP_JOIN_RULES_DIALOG_ACCEPT"}),cancelButtonLabel:n.intlMessage({intlName:"groups.GROUP_JOIN_RULES_DIALOG_DECLINE"})})).on("actionClick",function(){setTimeout(function(){o()},500)}),r.on("cancelClick",function(){setTimeout(function(){s()},500)}),r.show()):o()},this))},showInviteRequestModal:function(s){var a,u=n.intlMessage({intlName:"groups.GROUP_INVITE_ONLY_SEND"}),l=n.intlMessage({intlName:"common.CANCEL"}),g=r.getTemplate("join-group-invite-form",o.viewParams);(a=new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.GROUP_INVITE_ONLY_HEADER",groupName:e.Escape.html(i.title)}),htmlMessage:g({groupName:i.title}),actionButtonLabel:u,cancelButtonLabel:l})).on("actionClick",function(){var o=a.get("container").one(".group-invite-form");if(o){var r=o.get("value");if(r.length>0){var u={group_id:s,message:r,accept_rules:!0};t.callAPI("flickr.groups.joinRequest",u).then(function(t){e.config.win.location.reload()},function(o){var s="";s=o&&7===o.code?n.intlMessage({intlName:"groups.GROUP_INVITE_PENDING",groupName:e.Escape.html(i.title)}):"message"in o?o.message:n.intlMessage({intlName:"common.ERROR"}),new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"common.ERROR"}),message:s,actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()})}else setTimeout(function(){new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"common.ERROR"}),message:n.intlMessage({intlName:"groups.GROUP_INVITE_EMPTY_MESSAGE"}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()},300)}}),a.on("activated",function(){var e=a.get("container"),t=e.one("textarea")||!1;e&&t&&t.focus()}),a.show()},getJoinStatus:function(){var e=!1,n=!1,o=!1,s=!1,a=!1,r=t&&t.getViewer(),u=r&&r.signedIn;return e=i.isMember,a=i.isInvited,o=i.hasPendingRequestToJoin,n=2===i.privacy,s=i.isAdmin,{signedIn:u,canJoin:!e&&!o,hasJoined:e,hasRequested:o,isInvited:a,requiresRequest:n,isAdmin:s}},convertGroupInfoModel:function(e){var t=o.useSearchModel?e:e.getValue("group");i={title:t.getValue("title"),id:t.getValue("id"),memberCount:t.getValue("memberCount"),isMember:t.getValue("isMember"),isModerator:t.getValue("isModerator"),isAdmin:t.getValue("isAdmin"),privacy:t.getValue("privacy"),isInvited:e.getValue("isInvited"),hasPendingRequestToJoin:e.getValue("hasPendingRequestToJoin"),secureRules:e.getValue("secureRules")}},getInfo:function(){return{groupAttrs:i,joinStatus:this.getJoinStatus()}},toggleMuteGroup:function(t){var n={object_id:a,object_type:1,pref_type:"GroupBatch",pref_val:t?0:1};return this.insertUserPrefs(n).then(function(n){e.fire("groupStatusHelper:groupMuteToggled",{groupId:a,isMuted:t}),e.fire("groupStatusHelper:groupStatusChanged",{groupId:a})})},insertUserPrefs:function(e){return t.callAPI("flickr.feed.preferences.insertUserPreferences",e)},update:function(){this.convertGroupInfoModel(s)}};return e.augment(u,e.EventTarget),u}},"@VERSION@",{requires:["event-custom","template-lib-helper"]});YUI.add("base-notification-item-view",function(t,e){require("hermes-core/flog")(e);t.namespace("Views")[this.name]=t.Base.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,additionalViewClasses:function(){return["base-notification-item"]},initializer:function(e){this.params=e,this.activityItem=e.activityItem,this.notificationsHelper=new t.NotificationsHelper(this.appContext)},loadState:function(){return t.Promise.resolve()},buildContainer:function(){var t=this.notificationsHelper.getTemplateHtml(this.activityItem);this.setContainerHTML(t)},activate:function(){this.get("container");return this.setupContextMenu(),this},handleContextMenuClick:function(){var e,n,i;this.menuConfigData&&(n=(e=this.notificationsHelper.getContextMenuConfig(this.menuConfigData)).actionList.map(function(t){return{text:t.text,value:t.actionId}}),(i=new t.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorOffsetHorizontal:12,anchorOffsetVertical:0,width:250,dismissOnOverlayClick:!0,anchorElement:this.contextMenuButton,menuItems:n,positionFixed:!0,classList:"over-modal notification-context-menu",overlayClassList:"over-modal"})).show(),this.registerEventHandler(i.on("selected",function(t){e.actionList.find(function(e){return e.actionId===t.menuItem.value}).onSelected(t),i.close()})))},setupContextMenu:function(){var t=this,e=this.get("container"),n=this.params.activityItem;return this.contextMenuButton=e.one(".notification-context-menu-button"),this.contextMenuButton&&this.registerEventHandler(this.contextMenuButton.on("click",this.handleContextMenuClick.bind(this))),this.notificationsHelper.loadContextMenuConfig(n).then(function(e){t.menuConfigData=e})}})},"@VERSION@",{requires:["flickr-view"],langBundles:["common","relative-dates","notifications"]});YUI.add("hermes-template-follow",function(n,l){var a=n.Template.Handlebars.revive({1:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showNoButton:l,{name:"if",hash:{},fn:n.program(2,e,0),inverse:n.program(4,e,0),data:e}))?s:""},2:function(n,l,a,t,e){return""},4:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showUnblockButton:l,{name:"if",hash:{},fn:n.program(5,e,0),inverse:n.program(7,e,0),data:e}))?s:""},5:function(n,l,a,t,e){return"\t\t\t<button class='follow alt'>"+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.UNBLOCK"},data:e}))+"</button>\n"},7:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showFollowingButton:l,{name:"if",hash:{},fn:n.program(8,e,0),inverse:n.program(10,e,0),data:e}))?s:""},8:function(n,l,a,t,e){return'\t\t\t\t<button class="follow is-following mini"><span class="drop-icon">▾</span></button>\n'},10:function(n,l,a,t,e){return'\t\t\t\t<button class="follow mini"></button>\n'},12:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.isFluid:l,{name:"if",hash:{},fn:n.program(13,e,0),inverse:n.program(23,e,0),data:e}))?s:""},13:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showNoButton:l,{name:"if",hash:{},fn:n.program(2,e,0),inverse:n.program(14,e,0),data:e}))?s:""},14:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showUnblockButton:l,{name:"if",hash:{},fn:n.program(15,e,0),inverse:n.program(17,e,0),data:e}))?s:""},15:function(n,l,a,t,e){return"\t\t\t\t<button class='follow alt'>"+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.UNBLOCK"},data:e}))+"</button>\n"},17:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showFollowingButton:l,{name:"if",hash:{},fn:n.program(18,e,0),inverse:n.program(21,e,0),data:e}))?s:""},18:function(n,l,a,t,e){var s,o=null!=l?l:{};return'\t\t\t\t\t<button class="follow is-following '+(null!=(s=a.if.call(o,null!=l?l.isOnDark:l,{name:"if",hash:{},fn:n.program(19,e,0),inverse:n.noop,data:e}))?s:"")+'">'+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(o,{name:"intlMessage",hash:{intlName:null!=l?l.followingIntlKey:l},data:e}))+'<span class="drop-icon">▾</span></button>\n'},19:function(n,l,a,t,e){return"white"},21:function(n,l,a,t,e){var s,o=null!=l?l:{};return'\t\t\t\t\t<button class="follow '+(null!=(s=a.if.call(o,null!=l?l.isOnDark:l,{name:"if",hash:{},fn:n.program(19,e,0),inverse:n.noop,data:e}))?s:"")+'">'+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(o,{name:"intlMessage",hash:{intlName:null!=l?l.followIntlKey:l},data:e}))+"</button>\n"},23:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showNoButton:l,{name:"if",hash:{},fn:n.program(2,e,0),inverse:n.program(24,e,0),data:e}))?s:""},24:function(n,l,a,t,e){var s;return'\t\t\t<span class="relationship">\n'+(null!=(s=a.if.call(null!=l?l:{},null!=l?l.showUnblockButton:l,{name:"if",hash:{},fn:n.program(2,e,0),inverse:n.program(25,e,0),data:e}))?s:"")+"\t\t\t</span>\n"},25:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showFollowingButton:l,{name:"if",hash:{},fn:n.program(26,e,0),inverse:n.program(28,e,0),data:e}))?s:""},26:function(n,l,a,t,e){return"\t\t\t\t\t\t<button class='unfluid follow is-following ui-button ui-button-icon ui-button-transparent ui-button-dropdown'><span>"+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.FOLLOWING"},data:e}))+"</span></button>\n"},28:function(n,l,a,t,e){return"\t\t\t\t\t\t<button class='unfluid follow ui-button ui-button-icon'><span>"+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.FOLLOW"},data:e}))+"</span></button>\n"},compiler:[7,">= 4.0.0"],main:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.isOnMobile:l,{name:"if",hash:{},fn:n.program(1,e,0),inverse:n.program(12,e,0),data:e}))?s:""},useData:!0}),t={};n.Array.each([],function(l){var a=n.Template.get("hermes/"+l);a&&(t[l]=a)}),n.Template.register("hermes/follow",function(l,e){return e=e||{},e.partials=e.partials?n.merge(t,e.partials):t,a(l,e)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-fluid-modal",function(n,l){var t=n.Template.Handlebars.revive({1:function(n,l,t,a,e){return" html-modal"},3:function(n,l,t,a,e){return" subview-modal"},5:function(n,l,t,a,e){return" flex-layout"},7:function(n,l,t,a,e){return'<div class="close-x" aria-label="'+n.escapeExpression((t.intlMessage||l&&l.intlMessage||t.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.CLOSE"},data:e}))+'" tabindex="0"></div>'},9:function(n,l,t,a,e){var i;return'\t\t<div class="head">\n'+(null!=(i=t.if.call(null!=l?l:{},null!=l?l.navBarView:l,{name:"if",hash:{},fn:n.program(10,e,0),inverse:n.program(12,e,0),data:e}))?i:"")+'\t\t\t<div class="extra"></div>\n\t\t</div>\n'},10:function(n,l,t,a,e){return'\t\t\t\t<div class="nav"></div>\n'},12:function(n,l,t,a,e){var i;return'\t\t\t\t<div class="title">\n'+(null!=(i=t.if.call(null!=l?l:{},null!=l?l.title:l,{name:"if",hash:{},fn:n.program(13,e,0),inverse:n.program(15,e,0),data:e}))?i:"")+"\t\t\t\t</div>\n"},13:function(n,l,t,a,e){var i;return"\t\t\t\t\t\t"+n.escapeExpression("function"==typeof(i=null!=(i=t.title||(null!=l?l.title:l))?i:t.helperMissing)?i.call(null!=l?l:{},{name:"title",hash:{},data:e}):i)+"\n"},15:function(n,l,t,a,e){return"\t\t\t\t\t\t"+n.escapeExpression((t.renderTrustedMarkup||l&&l.renderTrustedMarkup||t.helperMissing).call(null!=l?l:{},null!=l?l.htmlTitle:l,{name:"renderTrustedMarkup",hash:{},data:e}))+"\n"},17:function(n,l,t,a,e){return" lines"},19:function(n,l,t,a,e){var i,r,s=null!=l?l:{},o=t.helperMissing;return'\t\t\t<div\n\t\t\t\tclass="content text-only '+(null!=(i=t.if.call(s,null!=l?l.noScroll:l,{name:"if",hash:{},fn:n.program(20,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=t.if.call(s,null!=l?l.showFooter:l,{name:"if",hash:{},fn:n.program(22,e,0),inverse:n.noop,data:e}))?i:"")+'"\n\t\t\t\tstyle="'+(null!=(i=(t.ifDefined||l&&l.ifDefined||o).call(s,null!=l?l.contentPadding:l,{name:"ifDefined",hash:{},fn:n.program(24,e,0),inverse:n.noop,data:e}))?i:"")+'">\n\t\t\t\t'+n.escapeExpression("function"==typeof(r=null!=(r=t.textMessage||(null!=l?l.textMessage:l))?r:o)?r.call(s,{name:"textMessage",hash:{},data:e}):r)+"\n\t\t\t</div>\n"},20:function(n,l,t,a,e){return" no-scroll"},22:function(n,l,t,a,e){return" has-footer"},24:function(n,l,t,a,e){var i,r,s=null!=l?l:{},o=t.helperMissing,u=n.escapeExpression;return"\n\t\t\t\t\tpadding-right: "+u("function"==typeof(r=null!=(r=t.contentPadding||(null!=l?l.contentPadding:l))?r:o)?r.call(s,{name:"contentPadding",hash:{},data:e}):r)+"px;\n\t\t\t\t\t"+(null!=(i=t.if.call(s,null!=l?l.showFooter:l,{name:"if",hash:{},fn:n.noop,inverse:n.program(25,e,0),data:e}))?i:"")+"\n\t\t\t\t\tpadding-left: "+u("function"==typeof(r=null!=(r=t.contentPadding||(null!=l?l.contentPadding:l))?r:o)?r.call(s,{name:"contentPadding",hash:{},data:e}):r)+"px;\n\t\t\t\t"},25:function(n,l,t,a,e){var i;return"padding-bottom: "+n.escapeExpression("function"==typeof(i=null!=(i=t.contentPadding||(null!=l?l.contentPadding:l))?i:t.helperMissing)?i.call(null!=l?l:{},{name:"contentPadding",hash:{},data:e}):i)+"px;"},27:function(n,l,t,a,e){var i,r=null!=l?l:{},s=t.helperMissing;return'\t\t\t<div\n\t\t\t\tclass="content html-only '+(null!=(i=t.if.call(r,null!=l?l.noScroll:l,{name:"if",hash:{},fn:n.program(20,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=t.if.call(r,null!=l?l.showFooter:l,{name:"if",hash:{},fn:n.program(22,e,0),inverse:n.noop,data:e}))?i:"")+'"\n\t\t\t\tstyle="'+(null!=(i=(t.ifDefined||l&&l.ifDefined||s).call(r,null!=l?l.contentPadding:l,{name:"ifDefined",hash:{},fn:n.program(24,e,0),inverse:n.noop,data:e}))?i:"")+'">\n\t\t\t\t'+n.escapeExpression((t.renderTrustedMarkup||l&&l.renderTrustedMarkup||s).call(r,null!=l?l.htmlMessage:l,{name:"renderTrustedMarkup",hash:{},data:e}))+"\n\t\t\t</div>\n"},29:function(n,l,t,a,e){var i,r=null!=l?l:{};return'\t\t\t<div\n\t\t\t\tclass="content subview '+(null!=(i=t.if.call(r,null!=l?l.noScroll:l,{name:"if",hash:{},fn:n.program(20,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=t.if.call(r,null!=l?l.showFooter:l,{name:"if",hash:{},fn:n.program(22,e,0),inverse:n.noop,data:e}))?i:"")+'"\n\t\t\t\tstyle="'+(null!=(i=(t.ifDefined||l&&l.ifDefined||t.helperMissing).call(r,null!=l?l.contentPadding:l,{name:"ifDefined",hash:{},fn:n.program(24,e,0),inverse:n.noop,data:e}))?i:"")+'"></div>\n'},31:function(n,l,t,a,e){var i;return'\t\t<div class="foot">\n'+(null!=(i=t.if.call(null!=l?l:{},null!=(i=null!=l?l.buttons:l)?i.visible:i,{name:"if",hash:{},fn:n.program(32,e,0),inverse:n.noop,data:e}))?i:"")+"\t\t</div>\n"},32:function(n,l,t,a,e){var i,r=null!=l?l:{};return'\t\t\t<div class="buttons">\n\t\t\t\t<div class="flavor-text-container">\n'+(null!=(i=t.if.call(r,null!=(i=null!=l?l.buttons:l)?i.flavorText:i,{name:"if",hash:{},fn:n.program(33,e,0),inverse:n.noop,data:e}))?i:"")+'\t\t\t\t</div>\n\t\t\t\t<div class="button-container">\n\t\t\t\t\t'+(null!=(i=t.if.call(r,null!=(i=null!=(i=null!=l?l.buttons:l)?i.cancel:i)?i.visible:i,{name:"if",hash:{},fn:n.program(36,e,0),inverse:n.noop,data:e}))?i:"")+"\n\t\t\t\t\t"+(null!=(i=t.if.call(r,null!=(i=null!=(i=null!=l?l.buttons:l)?i.action:i)?i.visible:i,{name:"if",hash:{},fn:n.program(38,e,0),inverse:n.noop,data:e}))?i:"")+"\n\t\t\t\t</div>\n\t\t\t</div>\n"},33:function(n,l,t,a,e){var i,r=null!=l?l:{};return'\t\t\t\t\t<div class="flavor-text secondary'+(null!=(i=t.unless.call(r,null!=(i=null!=(i=null!=l?l.buttons:l)?i.flavorText:i)?i.visible:i,{name:"unless",hash:{},fn:n.program(34,e,0),inverse:n.noop,data:e}))?i:"")+'">'+n.escapeExpression((t.renderTrustedMarkup||l&&l.renderTrustedMarkup||t.helperMissing).call(r,null!=(i=null!=(i=null!=l?l.buttons:l)?i.flavorText:i)?i.text:i,{name:"renderTrustedMarkup",hash:{},data:e}))+"</div>\n"},34:function(n,l,t,a,e){return" hidden"},36:function(n,l,t,a,e){var i;return'<button class="mini alt cancel">'+n.escapeExpression(n.lambda(null!=(i=null!=(i=null!=l?l.buttons:l)?i.cancel:i)?i.label:i,l))+"</button>"},38:function(n,l,t,a,e){var i,r=null!=l?l:{};return'<button class="mini '+(null!=(i=t.if.call(r,null!=(i=null!=(i=null!=l?l.buttons:l)?i.action:i)?i.isDangerous:i,{name:"if",hash:{},fn:n.program(39,e,0),inverse:n.noop,data:e}))?i:"")+' action"'+(null!=(i=t.if.call(r,null!=(i=null!=(i=null!=l?l.buttons:l)?i.action:i)?i.disabled:i,{name:"if",hash:{},fn:n.program(41,e,0),inverse:n.noop,data:e}))?i:"")+">"+n.escapeExpression(n.lambda(null!=(i=null!=(i=null!=l?l.buttons:l)?i.action:i)?i.label:i,l))+"</button>"},39:function(n,l,t,a,e){return"danger"},41:function(n,l,t,a,e){return' disabled="disabled"'},compiler:[7,">= 4.0.0"],main:function(n,l,t,a,e){var i,r,s=null!=l?l:{};return'<div class="modal'+(null!=(i=t.if.call(s,null!=l?l.htmlMessage:l,{name:"if",hash:{},fn:n.program(1,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=t.if.call(s,null!=l?l.subview:l,{name:"if",hash:{},fn:n.program(3,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=t.if.call(s,null!=l?l.flexLayout:l,{name:"if",hash:{},fn:n.program(5,e,0),inverse:n.noop,data:e}))?i:"")+" "+n.escapeExpression("function"==typeof(r=null!=(r=t.classList||(null!=l?l.classList:l))?r:t.helperMissing)?r.call(s,{name:"classList",hash:{},data:e}):r)+'">\n\t'+(null!=(i=t.if.call(s,null!=l?l.showCancelX:l,{name:"if",hash:{},fn:n.program(7,e,0),inverse:n.noop,data:e}))?i:"")+"\n"+(null!=(i=t.if.call(s,null!=l?l.showHeader:l,{name:"if",hash:{},fn:n.program(9,e,0),inverse:n.noop,data:e}))?i:"")+'\t<div class="body'+(null!=(i=t.if.call(s,null!=l?l.showBodyLines:l,{name:"if",hash:{},fn:n.program(17,e,0),inverse:n.noop,data:e}))?i:"")+'">\n'+(null!=(i=t.if.call(s,null!=l?l.textMessage:l,{name:"if",hash:{},fn:n.program(19,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=t.if.call(s,null!=l?l.htmlMessage:l,{name:"if",hash:{},fn:n.program(27,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=t.if.call(s,null!=l?l.subview:l,{name:"if",hash:{},fn:n.program(29,e,0),inverse:n.noop,data:e}))?i:"")+"\t</div>\n"+(null!=(i=t.if.call(s,null!=l?l.showFooter:l,{name:"if",hash:{},fn:n.program(31,e,0),inverse:n.noop,data:e}))?i:"")+"</div>\n"},useData:!0}),a={};n.Array.each([],function(l){var t=n.Template.get("hermes/"+l);t&&(a[l]=t)}),n.Template.register("hermes/fluid-modal",function(l,e){return e=e||{},e.partials=e.partials?n.merge(a,e.partials):a,t(l,e)})},"@VERSION@",{requires:["template-base","handlebars-base"]});